<div class="page" *ngIf="data(); else loadingOrError">
  <h1>Mi stand: {{ data()!.name }}</h1>
  <p class="subtitle">{{ data()!.cooperativeName }} · {{ data()!.contentType }}</p>

  <article class="stand-card" *ngIf="data()!.metrics as m">
    <p class="total">
      Estudiantes capacitados: <strong>{{ m.totalStudents }}</strong>
    </p>

    <div class="mini-grid">
      <div>
        <h3>Por género</h3>
        <ul>
          <li *ngFor="let g of (m.byGender | keyvalue)">
            <span>{{ g.key }}:</span>
            <strong>{{ g.value }}</strong>
          </li>
        </ul>
      </div>
      <div>
        <h3>Por rango de edad</h3>
        <ul>
          <li *ngFor="let a of (m.byAgeRange | keyvalue)">
            <span>{{ a.key }}:</span>
            <strong>{{ a.value }}</strong>
          </li>
        </ul>
      </div>
    </div>

    <div>
      <h3>Por tipo de contenido impartido</h3>
      <ul>
        <li *ngFor="let c of (m.byContentType | keyvalue)">
          <span>{{ c.key }}:</span>
          <strong>{{ c.value }}</strong>
        </li>
      </ul>
    </div>
  </article>

  <p class="muted" *ngIf="!data()!.metrics">
    Este stand aún no registra actividades.
  </p>
</div>

<ng-template #loadingOrError>
  <div class="page">
    <p *ngIf="loading()">Cargando métricas...</p>
    <p *ngIf="!loading() && error()" class="error">{{ error() }}</p>
  </div>
</ng-template>
