<div class="page" *ngIf="data(); else loadingOrError">
  <h1>Mi stand: {{ data()!.name }}</h1>
  <p class="subtitle">{{ data()!.cooperativeName }} · {{ data()!.contentType }}</p>

  <article class="stand-card" *ngIf="data()!.metrics as m">
    <div class="total-card">
      <h3>Estudiantes capacitados</h3>
      <p class="total-number">{{ m.totalStudents }}</p>
    </div>

    <div class="chart-section">
      <h3>Distribución por género</h3>
      <div class="chart-container" *ngIf="genderChartData.datasets[0]?.data?.length; else noGenderData">
        <canvas baseChart
          [data]="genderChartData"
          [options]="chartOptions"
          type="pie">
        </canvas>
      </div>
      <ng-template #noGenderData>
        <p class="muted">Sin datos aún</p>
      </ng-template>
    </div>

    <div class="chart-section">
      <h3>Distribución por edad</h3>
      <div class="chart-container" *ngIf="ageChartData.datasets[0]?.data?.length; else noAgeData">
        <canvas baseChart
          [data]="ageChartData"
          [options]="chartOptions"
          type="pie">
        </canvas>
      </div>
      <ng-template #noAgeData>
        <p class="muted">Sin datos aún</p>
      </ng-template>
    </div>
  </article>

  <p class="muted" *ngIf="!data()!.metrics">
    Este stand aún no registra actividades.
  </p>
</div>

<ng-template #loadingOrError>
  <div class="page">
    @if (loading()) {
      <p>Cargando métricas...</p>
    } @else if (error()) {
      <h1>Mi stand</h1>
      <p class="error">{{ error() }}</p>
    }
  </div>
</ng-template>
